(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{139:function(e,t,a){e.exports=a(277)},277:function(e,t,a){"use strict";a.r(t);var n,r,l=a(0),c=a.n(l),o=a(58),s=a(13),i=a(11),u=a(131),d=a(284),m=function(){return c.a.createElement("div",null)},p=a(282),h=a(283),E=a(60),f=a.n(E),b=a(3),v=a(2),y=a(8),S=a(6),g=a(9),O=a(278),N=function(){return null},j=function(){return null},w=function(){return null},C=(r=n=function(e){function t(){return Object(b.a)(this,t),Object(y.a)(this,Object(S.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){var e=this.props.children,t=e.find(function(e){return e.type===N}),a=e.find(function(e){return e.type===j}),n=e.find(function(e){return e.type===w});return c.a.createElement("div",{className:"grid-x grid-margin-x grid-padding-y"},c.a.createElement("div",{className:"cell medium-6"},c.a.createElement("div",{className:"text-left"},t?t.props.children:null)),c.a.createElement("div",{className:"cell medium-6"},c.a.createElement("div",{className:"text-right"},a?a.props.children:null)),c.a.createElement("div",{className:"cell medium-12 padding-top-0"},n?n.props.children:null))}}]),t}(l.Component),n.CellHeaderLeft=N,n.CellHeaderRight=j,n.CellMainContent=w,r);C.defaultProps={children:[]};var D=C,k=a(27),_=a(20),H=a.n(_),I=a(36),A=a(132),T=a.n(A).a.create({baseURL:"http://localhost:3005"}),L=a(65),M=Object(L.a)(),P=function(e){return function(){var t=Object(I.a)(H.a.mark(function t(a){var n,r;return H.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,T.get("/streams/".concat(e));case 2:n=t.sent,r=n.data,a({type:"HANDLE_FETCH_STREAM",payload:{data:r}});case 5:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},R=function(e){function t(){return Object(b.a)(this,t),Object(y.a)(this,Object(S.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(v.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.handleFetchStreams)()}},{key:"render",value:function(){var e=this.props,t=e.streams,a=e.hasSignedInState;return t.length?c.a.createElement(D,null,c.a.createElement(D.CellHeaderLeft,null),c.a.createElement(D.CellHeaderRight,null,a?c.a.createElement("div",{className:"text-right"},c.a.createElement(O.a,{type:"button",to:"/streams/create",className:"button radius bordered shadow social google"},c.a.createElement("span",{className:"google-text no-icon"},"Create New Stream"))):null),c.a.createElement(D.CellMainContent,null,t.map(function(e){var t=e.id;return c.a.createElement("div",{className:"radius bordered shadow card"},c.a.createElement("div",{className:"card-section"},c.a.createElement("h6",null,c.a.createElement("b",null,c.a.createElement("u",null,"Default stream credentials"))," ",c.a.createElement("br",null)," ",c.a.createElement("b",null,"url:")," rtmp://localhost/live ",c.a.createElement("br",null)," ",c.a.createElement("b",null,"Stream key:")," 1 "),c.a.createElement(O.a,{type:"button",to:"/streams/".concat(t),className:"primary radius bordered shadow button"},"Goto live stream from here")))}).reverse())):null}}]),t}(l.Component);R.defaultProps={streams:[],currentUserId:null,hasSignedInState:null,handleFetchStreams:function(){}};var F=Object(s.b)(function(e){var t=e.streams,a=e.auth,n=(a=void 0===a?{}:a).userId,r=a.hasSignedInState;return{streams:Object.values(t),currentUserId:n,hasSignedInState:r}},{handleFetchStreams:function(){return function(){var e=Object(I.a)(H.a.mark(function e(t){var a,n;return H.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.get("/streams");case 2:a=e.sent,n=a.data,t({type:"HANDLE_FETCH_STREAMS",payload:{data:n}});case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}})(R),x=a(280),G=a(279),U=function(e){var t=e.input,a=e.meta,n=(a=void 0===a?{}:a).touched,r=a.error,l=e.label,o=e.placeholder;return c.a.createElement("label",{className:n&&r?"is-invalid-label":""},c.a.createElement("strong",null,l),c.a.createElement("input",Object.assign({className:n&&r?"is-invalid-input":"",type:"text",placeholder:o},t)),n&&r?c.a.createElement("span",{className:"form-error is-visible"},r):null)};U.defaultProps={input:null,meta:null,label:"",placeholder:""};var K=U,V=function(e){var t=e.input,a=e.meta,n=(a=void 0===a?{}:a).touched,r=a.error,l=e.label,o=e.placeholder;return c.a.createElement("label",{className:n&&r?"is-invalid-label":""},c.a.createElement("strong",null,l),c.a.createElement("textarea",Object.assign({className:n&&r?"is-invalid-input":"",rows:"3",placeholder:o},t)),n&&r?c.a.createElement("span",{className:"form-error is-visible"},r):null)};V.defaultProps={input:null,meta:null,label:"",placeholder:""};var B=[{name:"title",errorContent:"You must enter a Title",component:K,ownProps:{label:"Enter Title",placeholder:"Enter your Title"}},{name:"description",errorContent:"You must enter a Description",component:V,ownProps:{label:"Enter Description",placeholder:"Enter your Description"}}];B.forEach(function(e){e.uuid=f.a.v4()});var J=B,X=function(e){function t(){var e,a;Object(b.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(y.a)(this,(e=Object(S.a)(t)).call.apply(e,[this].concat(r)))).onStreamSubmission=function(e){(0,a.props.handleFormSubmit)(e)},a}return Object(g.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){var e=this.props.handleSubmit;return c.a.createElement("form",{onSubmit:e(this.onStreamSubmission)},J.map(function(e){var t=e.uuid,a=e.name,n=e.component,r=e.ownProps,l=void 0===r?{}:r;return c.a.createElement(x.a,Object.assign({key:t,name:a,component:n},l))}),c.a.createElement("input",{type:"submit",className:"button",value:"Submit"}))}}]),t}(l.Component);X.defaultProps={handleSubmit:function(){},handleFormSubmit:function(){}};var Y=Object(G.a)({form:"streamForm",validate:function(e){var t={},a=function(e){return J.filter(function(t){return t.name===e})[0].errorContent};return e.title||(t.title=a("title")),e.description||(t.description=a("description")),t}})(X),W=function(e){function t(){var e,a;Object(b.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(y.a)(this,(e=Object(S.a)(t)).call.apply(e,[this].concat(r)))).onStreamCreate=function(e){(0,a.props.handleCreateStream)(e)},a}return Object(g.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){return c.a.createElement(D,null,c.a.createElement(D.CellHeaderLeft,null,c.a.createElement("h3",null,"Create a New Stream")),c.a.createElement(D.CellHeaderRight,null,c.a.createElement(O.a,{type:"button",to:"/",className:"button radius bordered shadow secondary"},"Go back to Homepage")),c.a.createElement(D.CellMainContent,null,c.a.createElement("div",{className:"radius bordered shadow card"},c.a.createElement("div",{className:"card-section"},c.a.createElement(Y,{handleFormSubmit:this.onStreamCreate})))))}}]),t}(l.Component);W.defaultProps={handleCreateStream:function(){}};var q=Object(s.b)(null,{handleCreateStream:function(e){return function(){var t=Object(I.a)(H.a.mark(function t(a,n){var r,l,c;return H.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=n().auth.userId,t.next=3,T.post("/streams",Object(k.a)({},e,{userId:r}));case 3:l=t.sent,c=l.data,a({type:"HANDLE_CREATE_STREAM",payload:{data:c}}),M.push("/");case 7:case"end":return t.stop()}},t)}));return function(e,a){return t.apply(this,arguments)}}()}})(W),z=a(133),Q=a.n(z),Z=function(e){function t(){var e,a;Object(b.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(y.a)(this,(e=Object(S.a)(t)).call.apply(e,[this].concat(r)))).onStreamEdit=function(e){var t=a.props;(0,t.handleEditStream)(t.match.params.id,e)},a}return Object(g.a)(t,e),Object(v.a)(t,[{key:"componentDidMount",value:function(){var e=this.props;(0,e.handleFetchStream)(e.match.params.id)}},{key:"render",value:function(){var e=this.props,t=e.stream;return e.hasSignedInState&&t?c.a.createElement(D,null,c.a.createElement(D.CellHeaderLeft,null,c.a.createElement("h3",null,"Edit your Stream")),c.a.createElement(D.CellHeaderRight,null,c.a.createElement(O.a,{type:"button",to:"/",className:"button radius bordered shadow secondary"},"Go back to Homepage")),c.a.createElement(D.CellMainContent,null,c.a.createElement("div",{className:"radius bordered shadow card"},c.a.createElement("div",{className:"card-section"},c.a.createElement(Y,{initialValues:Q()(t,"title","description"),handleFormSubmit:this.onStreamEdit}))))):null}}]),t}(l.Component);Z.defaultProps={stream:null,match:null,hasSignedInState:null,handleFetchStream:function(){},handleEditStream:function(){}};var $=Object(s.b)(function(e,t){var a=e.streams,n=e.auth,r=(n=void 0===n?{}:n).hasSignedInState;return{stream:a[t.match.params.id],hasSignedInState:r}},{handleFetchStream:P,handleEditStream:function(e,t){return function(){var a=Object(I.a)(H.a.mark(function a(n){var r,l;return H.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,T.patch("/streams/".concat(e),t);case 2:r=a.sent,l=r.data,n({type:"HANDLE_EDIT_STREAM",payload:{data:l}}),M.push("/");case 6:case"end":return a.stop()}},a)}));return function(e){return a.apply(this,arguments)}}()}})(Z),ee=function(e){var t=e.title,a=e.content,n=e.actionsMarkup,r=e.handleDismiss;return Object(o.createPortal)(c.a.createElement("div",{className:"reveal-overlay display-block",onClick:r},c.a.createElement("div",{className:"small reveal display-block radius bordered shadow"},c.a.createElement("div",{className:"delete-streams-content",onClick:function(e){return e.stopPropagation()}},c.a.createElement("h2",null,t),c.a.createElement("p",{className:"lead"},a),n),c.a.createElement("button",{className:"close-button","aria-label":"Close Delete Modal",type:"button"},c.a.createElement("span",{"aria-hidden":"true"},"\xd7")))),document.getElementById("delete-modal"))};ee.defaultProps={title:"",content:"",actionsMarkup:null,handleDismiss:function(){}};var te=ee,ae=function(e){function t(){var e,a;Object(b.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(y.a)(this,(e=Object(S.a)(t)).call.apply(e,[this].concat(r)))).handleEscapeKey=function(e){27===e.keyCode&&M.push("/")},a}return Object(g.a)(t,e),Object(v.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleEscapeKey,!1);var e=this.props;(0,e.handleFetchStream)(e.match.params.id)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleEscapeKey,!1)}},{key:"render",value:function(){var e=this.props,t=e.stream,a=e.hasSignedInState,n=e.handleDeleteStream,r=e.match;return a&&t?c.a.createElement(l.Fragment,null,c.a.createElement(te,{title:"Delete your Stream",content:"Are you sure you want to delete this stream?",actionsMarkup:c.a.createElement("div",{className:"button-group"},c.a.createElement("button",{className:"alert radius bordered shadow button",onClick:function(){return n(r.params.id)}},"Delete"),c.a.createElement(O.a,{to:"/",type:"button",className:"secondary radius bordered shadow button"},"Cancel")),handleDismiss:function(){return M.push("/")}}),c.a.createElement(D,null,c.a.createElement(D.CellHeaderLeft,null,c.a.createElement("h3",null,"View your Stream")),c.a.createElement(D.CellHeaderRight,null,c.a.createElement(O.a,{type:"button",to:"/",className:"button radius bordered shadow secondary"},"Go back to Homepage")),c.a.createElement(D.CellMainContent,null,c.a.createElement("div",{className:"radius bordered shadow card"},c.a.createElement("div",{className:"card-section"},c.a.createElement("h4",null,t.title),c.a.createElement("p",null,t.description)))))):null}}]),t}(l.Component);ae.defaultProps={stream:null,match:null,hasSignedInState:null,handleFetchStream:function(){},handleDeleteStream:function(){}};var ne=Object(s.b)(function(e,t){var a=e.streams,n=e.auth,r=(n=void 0===n?{}:n).hasSignedInState;return{stream:a[t.match.params.id],hasSignedInState:r}},{handleFetchStream:P,handleDeleteStream:function(e){return function(){var t=Object(I.a)(H.a.mark(function t(a){return H.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,T.delete("/streams/".concat(e));case 2:a({type:"HANDLE_DELETE_STREAM",payload:{id:e}}),M.push("/");case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}})(ae),re=a(137),le=function(e){function t(e){var a;return Object(b.a)(this,t),(a=Object(y.a)(this,Object(S.a)(t).call(this,e))).buildPlayer=function(){var e=a.props,t=e.stream,n=e.match;!a.player&&t&&(a.player=re.a.createPlayer({type:"flv",url:"http://localhost:8000/live/".concat(n.params.id,".flv")}),a.player.attachMediaElement(a.videoRef.current),a.player.load())},a.videoRef=Object(l.createRef)(),a}return Object(g.a)(t,e),Object(v.a)(t,[{key:"componentDidMount",value:function(){var e=this.props;(0,e.handleFetchStream)(e.match.params.id),this.buildPlayer()}},{key:"componentDidUpdate",value:function(){this.buildPlayer()}},{key:"render",value:function(){var e=this.props.stream;return e?c.a.createElement(D,null,c.a.createElement(D.CellHeaderLeft,null),c.a.createElement(D.CellHeaderRight,null),c.a.createElement(D.CellMainContent,null,c.a.createElement("div",{className:"radius bordered shadow card"},c.a.createElement("div",{className:"card-section"},c.a.createElement("h4",null,e.title),c.a.createElement("p",null,e.description),c.a.createElement("video",{ref:this.videoRef,className:"video-container radius bordered shadow",controls:!0}))))):null}}]),t}(l.Component);le.defaultProps={stream:null,match:null,handleFetchStream:function(){}};var ce=[{path:"/",page:F,ownProps:{}},{path:"/streams/create",page:q,ownProps:{}},{path:"/streams/:id(\\d+)",page:Object(s.b)(function(e,t){return{stream:e.streams[t.match.params.id]}},{handleFetchStream:P})(le),ownProps:{}},{path:"/streams/:id(\\d+)/edit/",page:$,ownProps:{}},{path:"/streams/:id(\\d+)/delete",page:ne,ownProps:{}}];ce.forEach(function(e){e.uuid=f.a.v4()});var oe=ce,se=function(){return c.a.createElement("div",{className:"grid-x grid-padding-x grid-padding-y"},c.a.createElement("div",{className:"cell"},c.a.createElement(p.a,null,oe.map(function(e){var t=e.uuid,a=e.path,n=e.page,r=e.ownProps,l=void 0===r?{}:r;return c.a.createElement(h.a,{exact:!0,key:t,path:a,render:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return c.a.createElement(n,Object.assign({},e,l))}})}))))},ie=function(){return c.a.createElement(d.a,{history:M},c.a.createElement(l.Fragment,null,c.a.createElement(m,null),c.a.createElement(se,null)))},ue=a(281),de={hasSignedInState:null,userId:null},me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:de,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"HANDLE_SIGN_IN":case"HANDLE_SIGN_OUT":var a,n;if("HANDLE_SIGN_IN"===t.type){var r=[t.payload.userId,!0];a=r[0],n=r[1]}else"HANDLE_SIGN_OUT"===t.type&&(a=null,n=!1);return Object(k.a)({},e,{hasSignedInState:n,userId:a});default:return e}},pe=a(61),he=a(135),Ee=a.n(he),fe=a(136),be=a.n(fe),ve=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"HANDLE_FETCH_STREAMS":return Object(k.a)({},e,be()(t.payload.data,"id"));case"HANDLE_FETCH_STREAM":case"HANDLE_CREATE_STREAM":case"HANDLE_EDIT_STREAM":return Object(k.a)({},e,Object(pe.a)({},t.payload.data.id,t.payload.data));case"HANDLE_DELETE_STREAM":return Ee()(e,t.payload.id);default:return e}},ye=me,Se=ue.a,ge=ve,Oe=Object(i.c)({auth:ye,form:Se,streams:ge}),Ne=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||i.d,je=Object(i.e)(Oe,Ne(Object(i.a)(u.a)));Object(o.render)(c.a.createElement(s.a,{store:je},c.a.createElement(ie,null)),document.getElementById("root"))}},[[139,1,2]]]);
//# sourceMappingURL=main.2fcbcf07.chunk.js.map